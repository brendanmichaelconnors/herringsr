# Prince Rupert District diagnostics

This section contains MCMC diagnostics for the Prince Rupert District major stock assessment region SCA model.
These tables and figures will not be included in the final Science Response.

```{r prd-parameter-est-table, results = 'asis', echo = FALSE}
cap <- paste0("Posterior (5\\textsuperscript{th} percentile, Median, and ",
              "95\\textsuperscript{th} percentile) and MPD estimates of key ",
              "parameters for the Prince Rupert District major stock ",
              "assessment region. Subscripts on $q$ ",
              "(catchability) indicate: 1 = Surface survey, 2 = Dive survey. ",
              "Tau ($\\tau$) and sigma ($\\sigma$) are calculated values.")
model_ind <- match(en2fr("PRD", french), major_regions_short)
make.parameters.est.table(major_models[[model_ind]],
                          xcaption = cap,
                          xlabel = "tab:prd-parameter-est-table",
                          font.size = 11,
                          space.size = 12,
                          placement = "H")
```

```{r prd-recruitment-table, results = 'asis', echo = FALSE}
cap <- paste0("Posterior (5\\textsuperscript{th} percentile, Median, and ",
              "95\\textsuperscript{th} percentile) and MPD estimates of ",
              "recruitment (millions) for the Prince Rupert District major ",
              "stock assessment region.")
make.value.table(major_models[[model_ind]],
                 type = 2,
                 syr = 2007,
                 xcaption = cap,
                 xlabel = "tab:prd-recruitment-table",
                 font.size = 11,
                 space.size = 12,
                 placement = "H")
                 ##tabular.environment = "longtable")
```

```{r prd-priors-posts-figure, fig.cap = "Prior probability distributions (lines) with comparative posterior histograms (bars) used in the Prince Rupert District major stock assessment region. Parameters $q_k$ represent gears where: $k=1$ is the surface survey and $k=2$ is the dive survey. The dotted red lines are the MPD estimates."}
make.priors.posts.plot(major_models[[model_ind]],
                       priors.only = FALSE)
```

```{r prd-traces-figure, fig.asp=1, fig.cap = paste0("Trace plots for MCMC output of estimated parameters for the Prince Rupert District major stock assessment region. The MCMC run had chain length ", mcmc_length, " with a sample taken at every ", f(mcmc_samp_freq), "th iteration. The catchability parameter $q_1$ represents the surface survey and $q_2$ the dive survey. Parameters $\\hat{a}_k$ (selectivity-at-age-50\\%), and $\\hat{\\gamma}_k$ (selectivity standard deviation-at-50\\%) represent gears as follows: $k=1$: Other fisheries, $k=2$: Roe seine, $k=3$: Gillnet roe.")}
make.traces.plot(major_models[[model_ind]],
                 axis.lab.freq = 200)
```

(ref:prd-autocor-figure) Autocorrelation plots for MCMC output of estimated parameters for the Prince Rupert District major stock assessment region. See Figure \@ref(fig:prd-traces-figure) for parameter descriptions.
```{r prd-autocor-figure, fig.asp=1, fig.cap = "(ref:prd-autocor-figure)"}
make.autocor.plot(major_models[[model_ind]])
```

(ref:prd-pairs-figure) Pairs plots for MCMC output of estimated parameters for the Prince Rupert District major stock assessment region. See Figure \@ref(fig:prd-traces-figure) for parameter descriptions.
```{r prd-pairs-figure, fig.asp=1, fig.cap = "(ref:prd-pairs-figure)"}
make.pairs.plot(major_models[[model_ind]])
```

(ref:prd-biomass-retro-figure) MPD biomass with retrospectivces for the Prince Rupert District major stock assessment region.
```{r prd-biomass-retro-figure, fig.cap = "(ref:prd-biomass-retro-figure)"}
biomass.plot.mpd(major_models[[model_ind]])
```


